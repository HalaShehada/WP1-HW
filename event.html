<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دليل فعاليات المدينة - تفاصيل الفعالية</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- خط Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS المخصص -->
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- رأس الصفحة -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="index.html">
                    <img src="assets/img/logo.png" alt="شعار دليل فعاليات المدينة" height="40">
                    <span class="brand-text">دليل فعاليات المدينة</span>
                </a>
                
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="index.html">الرئيسية</a></li>
                        <li class="nav-item"><a class="nav-link" href="events.html">الفعاليات</a></li>
                        <li class="nav-item"><a class="nav-link" href="about.html">عن الدليل</a></li>
                        <li class="nav-item"><a class="nav-link" href="contact.html">اتصل بنا</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- المحتوى الرئيسي -->
    <main class="container mt-4">
        <!-- مسار التنقل -->
        <nav aria-label="مسار التنقل" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">الرئيسية</a></li>
                <li class="breadcrumb-item"><a href="events.html">الفعاليات</a></li>
                <li class="breadcrumb-item active" id="breadcrumb-event">تفاصيل الفعالية</li>
            </ol>
        </nav>
        
        <!-- تفاصيل الفعالية -->
        <div id="event-container">
            <!-- سيملأه JavaScript -->
        </div>
            <button id="darkModeToggle" class="btn btn-outline-secondary rounded-circle shadow" style="position: fixed; bottom: 80px; left: 20px; z-index: 1000; width: 50px; height: 50px;">
    <i class="fas fa-moon"></i>
</button>
    </main>

    <!-- تذييل الصفحة -->
    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <h5>معلومات التواصل</h5>
                    <p><i class="fas fa-envelope me-2"></i> info@cityevents.com</p>
                    <p><i class="fas fa-phone me-2"></i> +963 111 111 111</p>
                </div>
                
                <div class="col-md-4 mb-3">
                    <h5>روابط سريعة</h5>
                    <ul class="list-unstyled">
                        <li><a href="index.html" class="text-white">الرئيسية</a></li>
                        <li><a href="events.html" class="text-white">الفعاليات</a></li>
                        <li><a href="about.html" class="text-white">عن الدليل</a></li>
                        <li><a href="contact.html" class="text-white">اتصل بنا</a></li>
                    </ul>
                </div>
                
                <div class="col-md-4 mb-3">
                    <h5>تابعنا على</h5>
                    <div class="social-icons">
                        <a href="#" class="text-white me-3"><i class="fab fa-twitter fa-2x"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-facebook fa-2x"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-instagram fa-2x"></i></a>
                    </div>
                </div>
            </div>
            
            <div class="text-center pt-3 border-top">
                <p>© 2026 دليل فعاليات المدينة. جميع الحقوق محفوظة.</p>
            </div>
        </div>
    </footer>

    <!-- Modal لمشاركة الفعالية -->
    <div class="modal fade" id="shareModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">شارك الفعالية</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <p class="mb-4">اختر طريقة المشاركة:</p>
                    <div class="d-flex justify-content-center gap-3">
                        <button class="btn btn-outline-primary share-option" data-platform="whatsapp">
                            <i class="fab fa-whatsapp fa-2x"></i>
                            <br>
                            <small>واتساب</small>
                        </button>
                        <button class="btn btn-outline-info share-option" data-platform="twitter">
                            <i class="fab fa-twitter fa-2x"></i>
                            <br>
                            <small>تويتر</small>
                        </button>
                        <button class="btn btn-outline-primary share-option" data-platform="facebook">
                            <i class="fab fa-facebook fa-2x"></i>
                            <br>
                            <small>فيسبوك</small>
                        </button>
                        <button class="btn btn-outline-secondary share-option" data-platform="copy">
                            <i class="fas fa-link fa-2x"></i>
                            <br>
                            <small>نسخ الرابط</small>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/main.js"></script>
    
    <!-- JavaScript لصفحة تفاصيل الفعالية -->
    <script>
        // تعليق: بيانات إضافية للصور ومعرض الصور
        const eventImages = {
            1: [
                'img/events/event1.jpg',
                'img/events/event1-gallery1.jpg',
                'img/events/event1-gallery2.jpg',
                'img/events/event1-gallery3.jpg'
            ],
            2: [
                'img/events/event2.jpg',
                'img/events/event2-gallery1.jpg',
                'img/events/event2-gallery2.jpg'
            ],
            3: [
                'img/events/event3.jpg',
                'img/events/event3-gallery1.jpg',
                'img/events/event3-gallery2.jpg'
            ]
        };
        
        // تعليق: مواقع الفعاليات على الخريطة (صور وهمية)
        const eventLocations = {
            1: 'assets/img/map-default.png',
            2: 'assets/img/map-default.png',
            3: 'assets/img/map-default.png'
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            // الحصول على معرف الفعالية من الرابط
            const urlParams = new URLSearchParams(window.location.search);
            const eventId = urlParams.get('id') || 1;
            
            // البحث عن الفعالية
            const event = eventsData.find(e => e.id == eventId) || eventsData[0];
            
            // تحديث مسار التنقل
            document.getElementById('breadcrumb-event').textContent = event.title;
            
            // عرض تفاصيل الفعالية
            displayEventDetails(event);
            
            // إضافة إلى التقويم
            document.addEventListener('click', function(e) {
                if (e.target.closest('#add-to-calendar-btn')) {
                    addToCalendar(event);
                }
                
                if (e.target.closest('#share-btn')) {
                    shareEvent(event);
                }
            });
            
            // التعامل مع مشاركة الفعالية
            document.querySelectorAll('.share-option').forEach(btn => {
                btn.addEventListener('click', function() {
                    const platform = this.dataset.platform;
                    shareOnPlatform(platform, event);
                });
            });
        });
        
        // دالة عرض تفاصيل الفعالية
        function displayEventDetails(event) {
            const container = document.getElementById('event-container');
            const images = eventImages[event.id] || [event.image];
            const locationMap = eventLocations[event.id] || 'assets/img/map-default.png';
            
            container.innerHTML = `
                <div class="row">
                    <!-- المحتوى الرئيسي -->
                    <div class="col-lg-8">
                        <!-- عنوان وتفاصيل أساسية -->
                        <div class="card mb-4 border-0 shadow-sm">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="badge bg-primary fs-6">${event.category}</span>
                                    <span class="text-muted">
                                        <i class="far fa-calendar-alt me-1"></i> ${event.date}
                                    </span>
                                </div>
                                
                                <h1 class="mb-3">${event.title}</h1>
                                
                                <div class="d-flex align-items-center mb-4">
                                    <i class="fas fa-map-marker-alt text-primary me-2"></i>
                                    <h5 class="mb-0">${event.location}</h5>
                                </div>
                                
                                <div class="mb-4">
                                    <h4>عن الفعالية</h4>
                                    <p class="fs-5">${event.description}</p>
                                    <p>${getFullDescription(event.id)}</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- معرض الصور -->
                        <div class="card mb-4 border-0 shadow-sm">
                            <div class="card-body">
                                <h4 class="mb-3">معرض الصور</h4>
                                <div class="row" id="event-gallery">
                                    ${images.map((img, index) => `
                                        <div class="col-6 col-md-4 mb-3">
                                            <img src="${img}" 
                                                 class="img-fluid rounded gallery-image" 
                                                 alt="صورة ${index + 1}"
                                                 style="height: 150px; width: 100%; object-fit: cover; cursor: pointer;"
                                                 onclick="openImageModal('${img}')">
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- الشريط الجانبي -->
                    <div class="col-lg-4">
                        <!-- معلومات سريعة -->
                        <div class="card mb-4 border-0 shadow-sm sticky-top" style="top: 20px;">
                            <div class="card-body">
                                <h4 class="mb-3">معلومات الفعالية</h4>
                                
                                <div class="mb-3">
                                    <h6><i class="fas fa-clock text-primary me-2"></i>الوقت</h6>
                                    <p>${event.time || '5:00 مساءً - 11:00 مساءً'}</p>
                                </div>
                                
                                <div class="mb-3">
                                    <h6><i class="fas fa-tag text-success me-2"></i>السعر</h6>
                                    <p>${event.price || 'مجاني'}</p>
                                </div>
                                
                                <div class="mb-3">
                                    <h6><i class="fas fa-user-tie text-warning me-2"></i>المنظم</h6>
                                    <p>${event.organizer || 'إدارة الفعاليات'}</p>
                                </div>
                                
                                <!-- أزرار الإجراءات -->
                                <div class="d-grid gap-2">
                                    <button id="add-to-calendar-btn" class="btn btn-primary">
                                        <i class="far fa-calendar-plus me-2"></i>أضف للتقويم
                                    </button>
                                    <button id="share-btn" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#shareModal">
                                        <i class="fas fa-share-alt me-2"></i>شارك الفعالية
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- خريطة الموقع -->
                        <div class="card mb-4 border-0 shadow-sm">
                            <div class="card-body">
                                <h4 class="mb-3">موقع الفعالية</h4>
                                <img src="${locationMap}" 
                                     class="img-fluid rounded" 
                                     alt="خريطة موقع الفعالية"
                                     style="height: 200px; width: 100%; object-fit: cover;">
                                <p class="mt-2 mb-0"><small>${event.location}</small></p>
                            </div>
                        </div>
                        
                        <!-- فعاليات ذات صلة -->
                        <div class="card border-0 shadow-sm">
                            <div class="card-body">
                                <h4 class="mb-3">فعاليات ذات صلة</h4>
                                <div id="related-events">
                                    <!-- ستضاف بواسطة JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // عرض فعاليات ذات صلة
            displayRelatedEvents(event);
        }
        
        // دالة للحصول على وصف كامل (يمكن توسيعها)
        function getFullDescription(eventId) {
            const descriptions = {
                1: "يقدم المهرجان مجموعة متنوعة من الأنشطة الموسيقية والفنية، بما في ذلك حفلات موسيقية حية، ورش عمل، وعروض فنية. يهدف المهرجان إلى دعم المواهب المحلية وتعزيز الثقافة الموسيقية في المجتمع.",
                2: "يضم المعرض أكثر من 100 دار نشر محلية وعالمية، مع أنشطة ثقافية متنوعة مثل جلسات التوقيع، الندوات الثقافية، وورش عمل للكتابة الإبداعية.",
                3: "الماراثون مفتوح لجميع الفئات العمرية، مع جوائز قيمة للفائزين. تتوزع المحطات الطبية على طول المسار لضمان سلامة المشاركين."
            };
            
            return descriptions[eventId] || "فعالية ثقافية/اجتماعية تهدف إلى إثراء المجتمع وتقديم تجربة فريدة للمشاركين.";
        }
        
        // دالة عرض فعاليات ذات صلة
        function displayRelatedEvents(currentEvent) {
            const relatedContainer = document.getElementById('related-events');
            const relatedEvents = eventsData.filter(e => 
                e.category === currentEvent.category && e.id != currentEvent.id
            ).slice(0, 2);
            
            if (relatedEvents.length === 0) {
                relatedContainer.innerHTML = '<p class="text-muted">لا توجد فعاليات ذات صلة حالياً.</p>';
                return;
            }
            
            relatedEvents.forEach(event => {
                const eventCard = document.createElement('div');
                eventCard.className = 'card border-0 mb-3';
                eventCard.innerHTML = `
                    <div class="row g-0">
                        <div class="col-4">
                            <img src="${event.image}" class="img-fluid rounded-start" alt="${event.title}" style="height: 80px; object-fit: cover;">
                        </div>
                        <div class="col-8">
                            <div class="card-body p-2">
                                <h6 class="card-title">${event.title}</h6>
                                <p class="card-text small text-muted mb-1">
                                    <i class="far fa-calendar-alt me-1"></i> ${event.date}
                                </p>
                                <a href="event.html?id=${event.id}" class="btn btn-sm btn-outline-primary">التفاصيل</a>
                            </div>
                        </div>
                    </div>
                `;
                relatedContainer.appendChild(eventCard);
            });
        }
        
        // دالة إضافة للتقويم
        function addToCalendar(event) {
            // هنا يمكن إضافة منطق حقيقي لإضافة إلى Google Calendar أو Apple Calendar
            // للمشروع، سنعرض رسالة تأكيد فقط
            alert(`تم إضافة "${event.title}" إلى تقويمك\nالتاريخ: ${event.date}\nالمكان: ${event.location}`);
        }
        
        // دالة مشاركة الفعالية
        function shareEvent(event) {
            // يتم فتح Modal للمشاركة، والدالة الفعلية في shareOnPlatform
        }
        
        // دالة المشاركة على المنصات المختلفة
        function shareOnPlatform(platform, event) {
            const eventUrl = window.location.href;
            const eventTitle = event.title;
            const eventDescription = event.description.substring(0, 100) + '...';
            
            let shareUrl = '';
            
            switch(platform) {
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodeURIComponent(eventTitle + ' - ' + eventUrl)}`;
                    window.open(shareUrl, '_blank');
                    break;
                    
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(eventTitle)}&url=${encodeURIComponent(eventUrl)}`;
                    window.open(shareUrl, '_blank');
                    break;
                    
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(eventUrl)}`;
                    window.open(shareUrl, '_blank');
                    break;
                    
                case 'copy':
                    navigator.clipboard.writeText(eventUrl)
                        .then(() => alert('تم نسخ رابط الفعالية إلى الحافظة'))
                        .catch(() => alert('حدث خطأ في نسخ الرابط'));
                    break;
            }
            
            // إغلاق الـ Modal
            const shareModal = bootstrap.Modal.getInstance(document.getElementById('shareModal'));
            shareModal.hide();
        }
        
        // دالة فتح صورة في modal (اختياري)
        function openImageModal(imageSrc) {
            const modalHtml = `
                <div class="modal fade" id="imageModal" tabindex="-1">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content">
                            <div class="modal-body p-0">
                                <img src="${imageSrc}" class="img-fluid w-100" alt="صورة الفعالية">
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // إضافة الـ Modal إلى الصفحة وفتحه
            document.body.insertAdjacentHTML('beforeend', modalHtml);
            const imageModal = new bootstrap.Modal(document.getElementById('imageModal'));
            imageModal.show();
            
            // إزالة الـ Modal عند الإغلاق
            document.getElementById('imageModal').addEventListener('hidden.bs.modal', function() {
                this.remove();
            });
        }
    </script>
</body>
</html>